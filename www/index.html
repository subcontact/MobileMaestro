<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
    <!--
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/modal.css" />
    <link rel="stylesheet" type="text/css" href="css/mobile-nav.css" />
-->
    <link rel="stylesheet" type="text/css" href="css/topcoat-mobile-dark.css">
    <link rel="stylesheet" type="text/css" href="css/app.css">
    <style>
    </style>
    <title>Sample</title>
</head>

<body class="full">
    <div class="topcoat-navigation-bar">
        <div class="topcoat-navigation-bar__item center full">
            <h1 class="topcoat-navigation-bar__title">Quiz</h1>
        </div>
    </div>
    <div>
    </div>
    <div class="topcoat-button-list centerize">
        <p>
            <button class=" topcoat-button--large larger" data-choice="a" data-modal="modal-11">A</button>
        </p>
        <p>
            <button class="topcoat-button--large larger" data-choice="b" data-modal="modal-11">B</button>
        </p>
        <p>
            <button class=" topcoat-button--large larger" data-choice="c" data-modal="modal-11">C</button>
        </p>
        <p>
            <button class="md-trigger topcoat-button--large larger" data-choice="d" data-modal="modal-11">D</button>
        </p>
    </div>

    <div class="md-overlay"></div>
    <div class="md-modal md-effect-8" id="modal-8">
        <div class="md-content">
            <h3>Incorrect</h3>
            <div>
                <p>Pffft. No!</p>
                <button class=" topcoat-button--cta md-close">Close</button>
            </div>
        </div>
    </div>
    <!--
    <aside  id="overlay-content" class="hide md-modal md-effect-11">
        <h1>Version 0.1</h1>
        <div class="topcoat-overlay-buttons">
            <button role="button" class="topcoat-button--cta" id="ok">Ok</button>
        </div>
    </aside>
    -->
    <!--
    <script src="http://192.168.0.3:8080/target/target-script-min.js#abc"></script>
    -->
    <script src="js/lib/jquery-2.0.3.min.js"></script>
    <script src="js/lib/util.js"></script>

    <script type="text/javascript">
    var activeChoice = {

        choice: null,
        el: null
    };

    var resultClass = {

        CORRECT : 'correct',
        INCORRECT : 'incorrect'
    };

    var choices = {

        A   : 'a',
        B   : 'b',
        C   : 'c',
        D   : 'd'
    };

    var closeOverlay = function() {

        $("#modal-8 div").removeClass(resultClass.CORRECT);
        $("#modal-8 div").removeClass(resultClass.INCORRECT);

        $(".md-overlay").removeClass("md-show");
        $("#modal-8").removeClass("md-show");

    };

    var openOverlay = function(result) {

        $("#modal-8 div").addClass(result);

        $("#modal-8").addClass("md-show");
        $(".md-overlay").addClass("md-show");
    };

    var choiceCommand = function(event) {

        var el = $(event.target);
        var choice = el.data('choice');

        if ((activeChoice.choice) && (activeChoice.choice === choice)) {
            // repeat button press - take no action
            return;
        }
        if (activeChoice.el) {

            activeChoice.el.removeClass("activeButton");
        }
        activeChoice.el = el;
        activeChoice.choice = choice;
        activeChoice.el.addClass("activeButton");
        console.debug(activeChoice.choice);

        if (activeChoice.choice === choices.D) {

            openOverlay(resultClass.INCORRECT);
        }
        else if (activeChoice.choice === choices.B) {

            openOverlay(resultClass.CORRECT);
        }
    };

    var clearChoice = function() {

        if (activeChoice.choice) {

            activeChoice.el.removeClass("activeButton");
            activeChoice.el = null;
            activeChoice.choice = null;
        }
    }

    if (Modernizr.touch) {

        //$(".topcoat-button--large").hammer().on('tap', choiceCommand);
        $(".topcoat-button--large").on('touchstart', choiceCommand);
        $(".md-close").on('touchstart', closeOverlay);

    } else {

        $(".topcoat-button--large").on('click', choiceCommand);
        $(".md-close").on('click', closeOverlay);
    }

    setTimeout(function() { openOverlay(); }, 2000);
    </script>
</body>

</html>
